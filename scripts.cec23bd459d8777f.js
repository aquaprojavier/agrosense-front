function liquidFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,circleThickness:.03,circleFillGap:.02,circleColor:"#3274A3",waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:1e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#2A81CB",waveOffset:0,textVertPosition:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#0fa4f2",waveTextColor:"#e8f4fa"}}function loadLiquidFillGauge(c,o,z,W,a){null==a&&(a=liquidFillGaugeDefaultSettings()),o<=W?(a.waveColor="#CB2B3E",a.textColor="#fc9da8",a.circleColor="#982E40"):o>z?(a.waveColor="#0481bf",a.textColor="#048dd1",a.circleColor="#02689c"):(a.waveColor="#2AAD27",a.textColor="#50bd4d",a.circleColor="#137811");var x,v=d3.select("#"+c),t=Math.min(parseInt(v.style("width")),parseInt(v.style("height")))/2,X=parseInt(v.style("width"))/2-t,Y=parseInt(v.style("height"))/2-t,w=Math.max(a.minValue,Math.min(a.maxValue,o))/a.maxValue;x=a.waveHeightScaling?d3.scale.linear().range([0,a.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([a.waveHeight,a.waveHeight]).domain([0,100]);var m=a.textSize*t/2,i=parseFloat(o).toFixed(0),A=a.valueCountUp?a.minValue:i,h=a.displayPercent?"%":"",P=a.circleThickness*t,n=P+a.circleFillGap*t,r=t-n,u=r*x(100*w),C=1+a.waveCount,T=2*r/a.waveCount*C,l=function(e){return Math.round(e)};parseFloat(i)!=parseFloat(l(i))&&(l=function(e){return parseFloat(e).toFixed(1)}),parseFloat(i)!=parseFloat(l(i))&&(l=function(e){return parseFloat(e).toFixed(2)});for(var R=[],d=0;d<=40*C;d++)R.push({x:d/(40*C),y:d/40});var S=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),G=d3.scale.linear().range([0,t]).domain([0,t]),B=d3.scale.linear().range([0,T]).domain([0,1]),U=d3.scale.linear().range([0,u]).domain([0,1]),F=d3.scale.linear().range([n+2*r+u,n-u]).domain([0,1]),V=d3.scale.linear().range([0,T-2*r]).domain([0,1]),M=d3.scale.linear().range([n+2*r,n+.7*m]).domain([0,1]),p=v.append("g").attr("transform","translate("+X+","+Y+")"),b=d3.svg.arc().startAngle(S(0)).endAngle(S(1)).outerRadius(G(t)).innerRadius(G(t-P));p.append("path").attr("d",b).style("fill",a.circleColor).attr("transform","translate("+t+","+t+")");var D=p.append("text").text(l(A)+h).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",m+"px").style("fill",a.textColor).attr("transform","translate("+t+","+M(a.textVertPosition)+")"),E=d3.svg.area().x(function(e){return B(e.x)}).y0(function(e){return U(Math.sin(2*Math.PI*a.waveOffset*-1+2*Math.PI*(1-a.waveCount)+2*e.y*Math.PI))}).y1(function(e){return 2*r+u}),y=p.append("defs").append("clipPath").attr("id","clipWave"+c),s=y.append("path").datum(R).attr("d",E).attr("T",0),H=p.append("g").attr("clip-path","url(#clipWave"+c+")");H.append("circle").attr("cx",t).attr("cy",t).attr("r",r).style("fill",a.waveColor);var L=H.append("text").text(l(A)+h).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",m+"px").style("fill",a.waveTextColor).attr("transform","translate("+t+","+M(a.textVertPosition)+")");if(a.valueCountUp){var I=function(){var e=d3.interpolate(this.textContent,i);return function(O){this.textContent=l(e(O))+h}};D.transition().duration(a.waveRiseTime).tween("text",I),L.transition().duration(a.waveRiseTime).tween("text",I)}var f=n+2*r-T;a.waveRise?y.attr("transform","translate("+f+","+F(0)+")").transition().duration(a.waveRiseTime).attr("transform","translate("+f+","+F(w)+")").each("start",function(){s.attr("transform","translate(1,0)")}):y.attr("transform","translate("+f+","+F(w)+")"),a.waveAnimate&&function q(){s.attr("transform","translate("+V(s.attr("T"))+",0)"),s.transition().duration(a.waveAnimateTime*(1-s.attr("T"))).ease("linear").attr("transform","translate("+V(1)+",0)").attr("T",1).each("end",function(){s.attr("T",0),q()})}()}