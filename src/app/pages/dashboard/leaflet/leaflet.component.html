<div class="container-fluid">
  <app-page-title
    title="{{ property?.propNombre }}"
    [breadcrumbItems]="breadCrumbItems"
  ></app-page-title>
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div id="map"></div>
      </div>
    </div>
  </div>
  <!-- end row -->
  <div class="row">
    <div id="gauge" class="col-12">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-5">RIEGO - Agua Disponbible Total ( % )</h4>
          <div class="flex-container">
            <div *ngFor="let device of devices">
              <!-- <div *ngIf=""> -->
              <div class="flex-gauge">
                <div><b>{{ device.devicesNombre }}</b></div>
                <svg
                  id="fillgauge{{ device.devicesId }}"
                  height="140"
                  style="margin: 5px"
                ></svg>
                <div>{{ device.devicesCultivo }}</div>
                <!-- <div>{{ device.soil.soilType }}</div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title mb-5">Recomendaciones de Riego</h4>
          <ul class="verti-timeline list-unstyled">
            <ng-container *ngIf="todayRecom">
            <li class="event-list active" *ngFor="let recomendacion of todayRecom.slice(0, 5)">
              <div class="event-timeline-dot">
                <i class="bx bxs-right-arrow-circle font-size-18" [ngClass]="{'bx-fade-left': formatDate(currentDate) === formatDate(recomendacion.date)}"></i>
              </div>
              <div class="media">
                <div class="mr-3">
                  <h5 class="font-size-14">
                    {{ recomendacion.date | date: 'dd/MM/yyyy'}}
                    <i class="bx bx-right-arrow-alt font-size-16 text-primary align-middle ms-2"></i>
                  </h5>
                </div>
                <div class="media-body">
                  <div>{{ recomendacion.recom }}</div>
                </div>
              </div>
            </li>
          </ng-container>
          <ng-container *ngIf="!todayRecom">
            <!-- Puedes mostrar un indicador de carga u otro mensaje mientras se cargan los datos -->
            <li>Cargando recomendaciones...</li>
          </ng-container>
          </ul>
          <div class="text-center mt-4">
            <a href="javascript: void(0);" class="btn btn-primary btn-sm">View More <i class="mdi mdi-arrow-right ms-1"></i></a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div id="meteo2" class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
      <div class="card" style="text-align: center">
        <iframe
          [src]="sanitizedUrlPronost"
          frameborder="0"
          scrolling="NO"
          allowtransparency="true"
          sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox"
          style="width: 100%; height: 420px"
        ></iframe>

        <div>
          <!-- DO NOT REMOVE THIS LINK --><a
            href="https://www.meteoblue.com/en/weather/week/{{
              property?.propUbic
            }}?utm_source=weather_widget&utm_medium=linkus&utm_content=daily&utm_campaign=Weather%2BWidget"
            target="_blank"
            rel="noopener"
            >meteoblue</a
          >
        </div>
        <!-- <div id="openweathermap-widget-11"></div> -->
        <!-- <script src='//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'></script><script>window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];  window.myWidgetParam.push({id: 11,cityid: '3844421',appid: '5f3a09c9c40ca76809a1cc96f5d1dff2',units: 'metric',containerid: 'openweathermap-widget-11',  });  (function() {var script = document.createElement('script');script.async = true;script.charset = "utf-8";script.src = "//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script, s);  })();</script> -->
      </div>
    </div>
    <div id="wind" class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
      <div class="card" style="text-align: center">
        <iframe
          [src]="sanitizedUrlWind"
          frameborder="0"
          scrolling="NO"
          allowtransparency="true"
          sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox"
          style="width: 100%; height: 420px"
        ></iframe>

        <div>
          <!-- DO NOT REMOVE THIS LINK --><a
            href="https://www.meteoblue.com/en/weather/maps/{{
              property?.propUbic
            }}?utm_source=weather_widget&utm_medium=linkus&utm_content=map&utm_campaign=Weather%2BWidget"
            target="_blank"
            rel="noopener"
            >meteoblue</a
          >
        </div>
        <!-- <div id="openweathermap-widget-11"></div> -->
        <!-- <script src='//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/d3.min.js'></script><script>window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];  window.myWidgetParam.push({id: 11,cityid: '3844421',appid: '5f3a09c9c40ca76809a1cc96f5d1dff2',units: 'metric',containerid: 'openweathermap-widget-11',  });  (function() {var script = document.createElement('script');script.async = true;script.charset = "utf-8";script.src = "//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(script, s);  })();</script> -->
      </div>
    </div>
    
  </div>
</div>
